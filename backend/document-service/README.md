# Document Service

## Overview
The Document Service manages all document generation, storage, and retrieval operations across the platform. It handles various document types including PNG, PDF, and Excel files generated by different services, as well as secure credential generation for staff and restaurants.

### Features
- Multi-format document storage (PNG, PDF, Excel)
- Secure document access control
- Document metadata management
- Export functionality for admin/super admin
- Integration with other services for document generation
- Automatic cleanup of temporary files
- Credential document generation
  * Staff credentials with auto-generation
  * Restaurant credentials
  * Secure PDF delivery with instructions

### Supported Document Types
- QR Code images (PNG)
- QR Code documents (PDF)
- Data exports (Excel)
- System reports
- Analytics exports
- Credential documents
  * Staff login credentials
  * Restaurant access credentials
  * Security instruction documents

### Configuration
```yaml
server:
  port: 8094
spring:
  application:
    name: document-service

document:
  storage:
    type: file-system  # or 's3' for production
    base-path: /data/documents
    temp-path: /data/temp
  retention:
    temp-files: 24h
    exports: 7d
  formats:
    - PNG
    - PDF
    - XLSX
  security:
    credentials-expiry: 24h
    force-password-change: true
```

### API Endpoints
- `POST /api/v1/documents/upload` - Upload new document
- `GET /api/v1/documents/{id}` - Retrieve document
- `GET /api/v1/documents/{id}/download` - Download document
- `DELETE /api/v1/documents/{id}` - Delete document
- `POST /api/v1/documents/export` - Generate and export data
- `GET /api/v1/documents/types` - List supported document types
- `GET /api/v1/documents/staff/credentials/{restaurantId}/{staffId}` - Generate staff credentials
- `GET /api/v1/documents/credentials/{restaurantId}` - Generate restaurant credentials

### Integration Points
- QR Code Service for code image storage
- Analytics Service for report generation
- Admin dashboard for data exports
- User Service for credentials generation
- Super admin functionality for system-wide exports

### Security
- Role-based access control
- Document ownership validation
- Secure file storage
- Access logging
- Secure credential generation and delivery

### Credential Generation Features
- Staff Credentials
  * Automatic username/password generation
  * Professional PDF format
  * Security instructions included
  * Password change requirements
  * Access control information
- Restaurant Credentials
  * Owner access details
  * System configuration
  * Security guidelines
  * Access management instructions

### Usage Examples
```bash
# Generate staff credentials
curl -X GET "http://localhost:8094/api/v1/documents/staff/credentials/restaurant-123/staff-456" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "john.doe",
    "password": "generated-secure-password"
  }'

# Generate restaurant credentials
curl -X GET "http://localhost:8094/api/v1/documents/credentials/restaurant-123" \
  -H "Content-Type: application/json"

# Upload a document
curl -X POST "http://localhost:8094/api/v1/documents/upload" \
  -H "Content-Type: multipart/form-data" \
  -F "file=@document.pdf" \
  -F "type=PDF" \
  -F "metadata={\"owner\":\"restaurant-123\"}"
``` 